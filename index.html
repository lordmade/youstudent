<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chaxo Splash</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Inter', 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(circle at center, #ff0000 0%, #cc0000 100%);
      background-size: 100% 100%;
      animation: pulseBg 3s ease-in-out infinite;
    }
    .animate-logo {
      animation: fadeIn 0.8s ease-out forwards;
    }
    .logo-path {
      stroke-dasharray: 500;
      stroke-dashoffset: 500;
      animation: draw 1.5s ease-out forwards, fill 0.5s ease-out 1.5s forwards;
      filter: url(#glow);
    }
    .animate-ring-1 {
      animation: spin 2s linear infinite, scalePulse 1s ease-in-out infinite;
    }
    .animate-ring-2 {
      animation: spin 2.5s linear infinite reverse, scalePulse 1.2s ease-in-out infinite;
    }
    .animate-ring-3 {
      animation: spin 3s linear infinite, scalePulse 1.4s ease-in-out infinite;
    }
    .animate-text {
      animation: fadeInText 1s ease-out forwards;
    }
    .animate-dot {
      animation: bounceDot 0.6s ease-in-out infinite;
    }
    .dot-2 {
      animation-delay: 0.2s;
    }
    .dot-3 {
      animation-delay: 0.4s;
    }
    @keyframes fadeIn {
      0% { opacity: 0; transform: scale(0.9); }
      100% { opacity: 1; transform: scale(1); }
    }
    @keyframes draw {
      to { stroke-dashoffset: 0; }
    }
    @keyframes fill {
      0% { fill: transparent; }
      100% { fill: #ffffff; }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    @keyframes scalePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    @keyframes pulseBg {
      0%, 100% { background-size: 100% 100%; }
      50% { background-size: 120% 120%; }
    }
    @keyframes fadeInText {
      0% { opacity: 0; transform: translateY(10px); }
      100% { opacity: 1; transform: translateY(0); }
    }
    @keyframes bounceDot {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen" aria-label="Chaxo splash screen">
  <div class="text-center relative">
    <!-- Custom SVG Logo and Loader -->
    <svg class="w-40 h-40 sm:w-48 sm:h-48 mx-auto animate-logo" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- Glow Filter -->
      <defs>
        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <linearGradient id="ringGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
          <stop offset="100%" style="stop-color:#ff6666;stop-opacity:0.8" />
        </linearGradient>
      </defs>
      <!-- Concentric Rings -->
      <circle cx="100" cy="100" r="90" stroke="url(#ringGradient)" stroke-width="3" class="animate-ring-1"/>
      <circle cx="100" cy="100" r="85" stroke="url(#ringGradient)" stroke-width="3" class="animate-ring-2"/>
      <circle cx="100" cy="100" r="80" stroke="url(#ringGradient)" stroke-width="3" class="animate-ring-3"/>
      <!-- Chaxo Logo (Stylized C with Chat Bubble) -->
      <path class="logo-path" d="M 80 50 C 120 50 150 80 150 100 C 150 120 120 150 80 150 C 60 150 40 140 40 120 L 40 80 C 40 60 60 50 80 50" stroke="#ffffff" stroke-width="8" fill="transparent"/>
      <path class="logo-path" d="M 40 120 C 30 130 30 140 40 150 L 60 170 L 80 150" stroke="#ffffff" stroke-width="8" fill="transparent"/>
    </svg>
    <!-- Animated Loading Text with Dots -->
    <div class="mt-4 flex items-center justify-center animate-text" aria-live="polite">
      <span class="text-white text-lg sm:text-xl font-bold">Loading</span>
      <span class="flex ml-2 space-x-1">
        <span class="w-2 h-2 bg-white rounded-full animate-dot"></span>
        <span class="w-2 h-2 bg-white rounded-full animate-dot dot-2"></span>
        <span class="w-2 h-2 bg-white rounded-full animate-dot dot-3"></span>
      </span>
    </div>
  </div>

  <!-- Firebase and Auth Logic -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-app.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-auth.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.6.11/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBOyZ3As4GTuNvjemvPF_SpsC6m6vqtNhc",
      authDomain: "fire-b-a8878.firebaseapp.com",
      databaseURL: "https://fire-b-a8878.firebaseio.com",
      projectId: "fire-b-a8878",
      storageBucket: "fire-b-a8878.firebasestorage.app",
      messagingSenderId: "658673187627",
      appId: "1:658673187627:web:6e4c29af661785f0afa36e",
      measurementId: "G-V4W97VMSKL"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getDatabase(app);

    onAuthStateChanged(auth, async (user) => {
      try {
        if (user) {
          const userRef = ref(db, 'users/' + user.uid);
          const snapshot = await get(userRef);
          if (snapshot.exists()) {
            setTimeout(() => {
              window.location.href = "friends.html";
            }, 2000);
          } else {
            setTimeout(() => {
              window.location.href = "signup.html";
            }, 2000);
          }
        } else {
          setTimeout(() => {
            window.location.href = "friends.html";
          }, 2000);
        }
      } catch (error) {
        console.error('Auth state error:', error);
        setTimeout(() => {
          window.location.href = "signup.html";
        }, 2000);
      }
    });
  </script>
</body>
</html>if user already signed in then redirect to friends.html 
